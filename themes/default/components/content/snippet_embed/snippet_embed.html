<div class="snippet-embed" data-component="snippet_embed" data-theme="{{ theme }}" data-source="{{ snippet.source | default(value='unknown') }}">
  {% slot header %}
  {% if show_header %}
  <header class="snippet-embed-header">
    <div class="snippet-embed-info">
      {% if snippet.title %}
      <h3 class="snippet-embed-title">
        {% if snippet.url %}
        <a href="{{ snippet.url }}" class="snippet-embed-title-link" target="_blank" rel="noopener noreferrer">
          {{ snippet.title }}
        </a>
        {% else %}
        {{ snippet.title }}
        {% endif %}
      </h3>
      {% endif %}
      
      <div class="snippet-embed-meta">
        {% if snippet.author %}
        <span class="snippet-embed-author">by {{ snippet.author }}</span>
        {% endif %}
        
        {% if snippet.source %}
        <span class="snippet-embed-source">
          {% component "icon" with name="link" library="feather" size="xs" %}
          {% endslot %}
          {{ snippet.source }}
        </span>
        {% endif %}
        
        {% if snippet.language %}
        <span class="snippet-embed-language">{{ snippet.language }}</span>
        {% endif %}
        
        {% if snippet.created_date %}
        <span class="snippet-embed-date">{{ snippet.created_date | date(format="%b %d, %Y") }}</span>
        {% endif %}
      </div>
    </div>
    
    <div class="snippet-embed-actions">
      {% if snippet.url %}
      <a href="{{ snippet.url }}" class="snippet-embed-action snippet-embed-action--external" target="_blank" rel="noopener noreferrer" title="View original">
        {% component "icon" with name="external-link" library="feather" size="sm" %}
        {% endslot %}
      </a>
      {% endif %}
      
      <button class="snippet-embed-action snippet-embed-action--copy" data-action="copy" title="Copy code">
        {% component "icon" with name="copy" library="feather" size="sm" %}
        {% endslot %}
      </button>
      
      <button class="snippet-embed-action snippet-embed-action--fullscreen" data-action="fullscreen" title="Toggle fullscreen">
        {% component "icon" with name="maximize" library="feather" size="sm" %}
        {% endslot %}
      </button>
    </div>
  </header>
  {% endif %}
  {% endslot %}
  
  <div class="snippet-embed-content">
    <div class="snippet-embed-code-container" data-code-container style="max-height: {{ max_height }}">
      {% if show_line_numbers %}
      <div class="snippet-embed-line-numbers" data-line-numbers>
        {% for line in snippet.content | split(pat="\n") %}
        <span class="snippet-embed-line-number">{{ loop.index }}</span>
        {% endfor %}
      </div>
      {% endif %}
      
      <pre class="snippet-embed-code" data-code><code class="language-{{ snippet.language | default(value='text') }}">{{ snippet.content }}</code></pre>
    </div>
    
    {% if snippet.content | line_count > 10 %}
    <div class="snippet-embed-expand">
      <button class="snippet-embed-expand-btn" data-expand>
        <span class="snippet-embed-expand-text">Show all {{ snippet.content | line_count }} lines</span>
        {% component "icon" with name="chevron-down" library="feather" size="sm" %}
        {% endslot %}
      </button>
    </div>
    {% endif %}
  </div>
  
  {% slot footer %}
  {% if show_footer %}
  <footer class="snippet-embed-footer">
    <div class="snippet-embed-stats">
      <span class="snippet-embed-stat">
        {% component "icon" with name="file-text" library="feather" size="xs" %}
        {% endslot %}
        {{ snippet.content | line_count }} lines
      </span>
      
      {% if snippet.content | length > 0 %}
      <span class="snippet-embed-stat">
        {% component "icon" with name="hard-drive" library="feather" size="xs" %}
        {% endslot %}
        {{ (snippet.content | length / 1024) | round(precision=1) }} KB
      </span>
      {% endif %}
      
      {% if snippet.language %}
      <span class="snippet-embed-stat">
        {% component "icon" with name="code" library="feather" size="xs" %}
        {% endslot %}
        {{ snippet.language }}
      </span>
      {% endif %}
    </div>
    
    {% if snippet.description %}
    <div class="snippet-embed-description">
      <p>{{ snippet.description }}</p>
    </div>
    {% endif %}
  </footer>
  {% endif %}
  {% endslot %}
  
  {% if snippet.license %}
  <div class="snippet-embed-license">
    <span class="snippet-embed-license-text">
      {% component "icon" with name="copyright" library="feather" size="xs" %}
      {% endslot %}
      {{ snippet.license }}
    </span>
  </div>
  {% endif %}
</div>