<section class="article-related" data-component="article_related" data-layout="{{ layout }}" data-columns="{{ columns }}">
  <header class="article-related-header">
    {% slot title %}
    <h2 class="article-related-title">Related Articles</h2>
    {% endslot %}
    
    {% if subtitle %}
    <p class="article-related-subtitle">
      {% slot subtitle %}{% endslot %}
    </p>
    {% endif %}
  </header>
  
  <div class="article-related-content">
    {% if layout == "carousel" %}
    <div class="article-related-carousel" data-carousel>
      <button class="article-related-carousel-btn article-related-carousel-btn--prev" data-carousel-prev>
        {% component "icon" with name="chevron-left" library="feather" size="md" %}
        {% endslot %}
      </button>
      
      <div class="article-related-carousel-track" data-carousel-track>
        <div class="article-related-carousel-list">
          {% for article in related_articles[:max_articles] %}
          <div class="article-related-carousel-item">
            {% component "article_card" with article=article show_thumbnail=show_thumbnails show_tags=show_tags show_date=show_dates size="compact" %}
            {% endslot %}
          </div>
          {% endfor %}
        </div>
      </div>
      
      <button class="article-related-carousel-btn article-related-carousel-btn--next" data-carousel-next>
        {% component "icon" with name="chevron-right" library="feather" size="md" %}
        {% endslot %}
      </button>
    </div>
    {% else %}
    <div class="article-related-grid article-related-grid--{{ layout }}" data-grid>
      {% for article in related_articles[:max_articles] %}
      <div class="article-related-grid-item">
        {% component "article_card" with article=article show_thumbnail=show_thumbnails show_tags=show_tags show_date=show_dates size="compact" %}
        {% endslot %}
      </div>
      {% endfor %}
    </div>
    {% endif %}
  </div>
  
  {% if actions %}
  <footer class="article-related-footer">
    {% slot actions %}{% endslot %}
  </footer>
  {% endif %}
  
  {% if related_articles|length > max_articles %}
  <div class="article-related-more">
    <button class="article-related-more-btn" data-more-btn>
      <span class="article-related-more-text">View all related articles</span>
      {% component "icon" with name="arrow-right" library="feather" size="sm" %}
      {% endslot %}
    </button>
  </div>
  {% endif %}
</section>